<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Fetch API: POST</title>
</head>
<body>
    <h1>Fetch API: POST</h1>
    <input type="text" name="nama" id="nama" placeholder="Ketik nama disini">
    <input type="text" name="npm" id="npm" placeholder="Ketik NPM disini">
    <button id="btnKirimData">Kirim Data</button>
    <div id="tampilanData"></div>
    <script>
        var tampilanData = document.getElementById("tampilanData");

        function fetchAPIPOST() {
            var inputNama = document.getElementById("nama").value;
            var inputNPM = document.getElementById("npm").value;
            var dataInput = "nama=" + inputNama + "&npm=" + inputNPM;
            url = 'api.php/mahasiswa';
            fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: dataInput
                })
                .then((resp) => resp.json())
                .then(function (data) {
                    tampilkanData(data);
                })
                .catch(function (error) {
                    console.log(JSON.stringify(error));
                });
        }

        // Fungsi untuk menampilkan data
        function tampilkanData(dataRAW) {
            tampilanData.innerHTML = "Status: " + dataRAW.status + "<br/>";
            tampilanData.innerHTML += "ID data: " + dataRAW.id;
        }
        document.getElementById("btnKirimData").addEventListener("click", fetchAPIPOST);
    </script>
</body>
</html>
